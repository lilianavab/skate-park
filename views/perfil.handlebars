<a href="/"><h1>Skate Park</h1></a>0.
  
<div class="py-4">
    <h2>Datos del Perfil</h2>
    <hr class="w-50" />

    <form>
        <div class="mb-3 row w-50 m-auto">
            <div class="mb-3 col-12 col-sm-6">
                <label>Email</label>
                <input name="email" class="form-control m-auto" disabled value="{{skater.email}}" />
            </div>
            <div class="mb-3 col-12 col-sm-6">
                <label>Nombre</label>
                <input name="nombre" class="form-control m-auto" value="{{skater.nombre}}" />
            </div>
            <div class="mb-3 col-12 col-sm-6">
                <label>Password</label>
                <input name="password" type="password" class="form-control m-auto" value="{{skater.password}}" />
            </div>
            <div class="mb-3 col-12 col-sm-6">
                <label>Repita la Password</label>
                <input type="password" class="form-control m-auto" value="{{skater.password}}" />
            </div>
            <div class="mb-3 col-12 col-sm-6">
                <label>Años de Experiencia</label>
                <input name="anos_experiencia" class="form-control m-auto" value="{{skater.anos_experiencia}}" />
            </div>
            <div class="mb-3 col-12 col-sm-6">
                <label>Especialidad</label>
                <input name="especialidad" class="form-control m-auto" value="{{skater.especialidad}}" />
            </div>

        </div>
        <div class="mb-1">
            <button class="btn btn-primary" id="updateBtn">Actualizar</button>
        </div>
        <div>
        </div>
    </form>
    <button class="btn btn-danger" id="deleteBtn">Eliminar cuenta</button>
</div>

<script>
    const deleteBtn = document.getElementById("deleteBtn")
    const id = `{{skater.id}}`
    deleteBtn.addEventListener("click", async () => {
        try {
            const { data: token } = await axios.delete(`/skaters/${id}`)
            alert("Usuario eliminado con éxito")
            window.location = `/`
        } catch ({ response }) {
            const { data } = response
            const { error } = data
            alert(error)
        }
    })

    const form = document.querySelector("form")
    form.addEventListener("submit", async (e) => {
        e.preventDefault()

        let [email, nombre, password, repassword, anos_experiencia, especialidad] = document.querySelectorAll("input")

        nombre = nombre.value
        password = password.value
        anos_experiencia = anos_experiencia.value
        especialidad = especialidad.value
        const skater = {nombre, password, anos_experiencia, especialidad}
        try {
            await axios.put("/skaters", skater)
            alert("Datos actualizados con éxito")
            window.location = "/"
        } catch ({ response }) {
            const { data } = response
            const { error } = data
            alert(error)
        }
    })
</script>